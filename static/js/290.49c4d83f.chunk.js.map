{"version":3,"file":"static/js/290.49c4d83f.chunk.js","mappings":"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","sources":["utils/fileElementValidator.ts"],"sourcesContent":["import { FileUIElement } from '../models/uiElements';\nimport { PatternLibraryElement } from '../models/listingFlow';\n\n/**\n * Validierungsergebnis für FileUIElement\n */\nexport interface FileElementValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\n/**\n * Validiert ein FileUIElement auf Vollständigkeit und Korrektheit\n * \n * @param element - Das zu validierende FileUIElement\n * @returns Validierungsergebnis mit Fehlern und Warnungen\n */\nexport function validateFileUIElement(element: FileUIElement): FileElementValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // KRITISCH: field_id muss vorhanden sein\n  if (!element.field_id || !element.field_id.field_name) {\n    errors.push('Fehlendes erforderliches Feld: field_id (eindeutige Identifikation des Elements)');\n  }\n\n  // KRITISCH: id_field_id muss vorhanden sein\n  if (!element.id_field_id || !element.id_field_id.field_name) {\n    errors.push('Fehlendes erforderliches Feld: id_field_id (Speicherort für Datei-IDs)');\n  }\n\n  // EMPFOHLEN: caption_field_id sollte vorhanden sein\n  if (!element.caption_field_id || !element.caption_field_id.field_name) {\n    warnings.push('Fehlendes empfohlenes Feld: caption_field_id (Speicherort für Bildunterschriften)');\n  }\n\n  // EMPFOHLEN: min_count sollte definiert sein\n  if (element.min_count === undefined || element.min_count === null) {\n    warnings.push('Fehlendes empfohlenes Feld: min_count (Mindestanzahl der Dateien, Standard: 0)');\n  }\n\n  // EMPFOHLEN: max_count sollte definiert sein\n  if (element.max_count === undefined || element.max_count === null) {\n    warnings.push('Fehlendes empfohlenes Feld: max_count (Höchstanzahl der Dateien, Standard: 1)');\n  }\n\n  // VALIDIERUNG: min_count <= max_count\n  if (\n    element.min_count !== undefined &&\n    element.max_count !== undefined &&\n    element.min_count > element.max_count\n  ) {\n    errors.push(`Ungültige Konfiguration: min_count (${element.min_count}) ist größer als max_count (${element.max_count})`);\n  }\n\n  // EMPFOHLEN: allowed_file_types sollte nicht leer sein\n  if (!element.allowed_file_types || element.allowed_file_types.length === 0) {\n    warnings.push('Keine erlaubten Dateitypen definiert (allowed_file_types ist leer). Alle Dateitypen werden akzeptiert.');\n  }\n\n  // EMPFOHLEN: title sollte vorhanden sein\n  if (!element.title || (!element.title.de && !element.title.en)) {\n    warnings.push('Fehlendes empfohlenes Feld: title (Titel des Elements)');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    warnings\n  };\n}\n\n/**\n * Validiert alle FileUIElements in einem Array von PatternLibraryElements (rekursiv)\n * \n * @param elements - Array von PatternLibraryElements\n * @returns Array von Validierungsergebnissen mit Pfadinformationen\n */\nexport function validateAllFileUIElements(\n  elements: PatternLibraryElement[],\n  parentPath: string = ''\n): Array<{ path: string; result: FileElementValidationResult }> {\n  const results: Array<{ path: string; result: FileElementValidationResult }> = [];\n\n  elements.forEach((item, index) => {\n    const currentPath = parentPath ? `${parentPath}[${index}]` : `[${index}]`;\n    const element = item.element;\n\n    // Prüfe, ob es ein FileUIElement ist\n    if (element.pattern_type === 'FileUIElement') {\n      const validationResult = validateFileUIElement(element as FileUIElement);\n      if (!validationResult.isValid || validationResult.warnings.length > 0) {\n        results.push({\n          path: currentPath,\n          result: validationResult\n        });\n      }\n    }\n\n    // Rekursiv in verschachtelte Elemente schauen\n    if ('elements' in element && Array.isArray(element.elements)) {\n      const nestedResults = validateAllFileUIElements(\n        element.elements as PatternLibraryElement[],\n        currentPath\n      );\n      results.push(...nestedResults);\n    }\n  });\n\n  return results;\n}\n\n/**\n * Repariert ein FileUIElement, indem fehlende erforderliche Felder hinzugefügt werden\n * \n * @param element - Das zu reparierende FileUIElement\n * @returns Repariertes FileUIElement\n */\nexport function repairFileUIElement(element: FileUIElement): FileUIElement {\n  const repaired = { ...element };\n\n  // Füge field_id hinzu, falls fehlend\n  if (!repaired.field_id || !repaired.field_id.field_name) {\n    const uuid = crypto.randomUUID ? crypto.randomUUID() : generateFallbackUUID();\n    repaired.field_id = {\n      field_name: `fileuielement_${uuid}`\n    };\n  }\n\n  // Füge id_field_id hinzu, falls fehlend\n  if (!repaired.id_field_id || !repaired.id_field_id.field_name) {\n    const fieldName = repaired.title?.de || repaired.title?.en || 'file';\n    const sanitizedName = fieldName.toLowerCase().replace(/[^a-z0-9]/g, '_');\n    repaired.id_field_id = {\n      field_name: `${sanitizedName}_id`\n    };\n  }\n\n  // Füge caption_field_id hinzu, falls fehlend\n  if (!repaired.caption_field_id || !repaired.caption_field_id.field_name) {\n    const fieldName = repaired.title?.de || repaired.title?.en || 'file';\n    const sanitizedName = fieldName.toLowerCase().replace(/[^a-z0-9]/g, '_');\n    repaired.caption_field_id = {\n      field_name: `${sanitizedName}_caption`\n    };\n  }\n\n  // Setze min_count, falls fehlend\n  if (repaired.min_count === undefined || repaired.min_count === null) {\n    repaired.min_count = 0;\n  }\n\n  // Setze max_count, falls fehlend\n  if (repaired.max_count === undefined || repaired.max_count === null) {\n    repaired.max_count = 10;\n  }\n\n  return repaired;\n}\n\n/**\n * Fallback UUID-Generator für Browser ohne crypto.randomUUID\n */\nfunction generateFallbackUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n"],"names":["validateFileUIElement","element","errors","warnings","field_id","field_name","push","id_field_id","caption_field_id","undefined","min_count","max_count","concat","allowed_file_types","length","title","de","en","isValid","validateAllFileUIElements","elements","parentPath","arguments","results","forEach","item","index","currentPath","pattern_type","validationResult","path","result","Array","isArray","nestedResults","repairFileUIElement","repaired","_objectSpread","uuid","crypto","randomUUID","replace","c","r","Math","random","toString","_repaired$title","_repaired$title2","sanitizedName","toLowerCase","_repaired$title3","_repaired$title4"],"sourceRoot":""}